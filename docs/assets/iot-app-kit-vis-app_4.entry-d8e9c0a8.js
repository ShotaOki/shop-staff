import{h as M,g as it,r as tt,a as ot}from"./index-d9c51ec4.js";import{r as Ot}from"./routes-8fa7d571-0a502d72.js";import{m as pt,a as wt,s as Lt,b as kt,g as gt,c as yt,d as W,e as xt,f as S,h as ut,i as mt,j as bt,k as V,l as q,n as lt,o as Ht,p as St}from"./dom-utils-97f33dea-783fd673.js";import{A as st}from"./active-router-6c511761-00353e88.js";var Z=globalThis&&globalThis.__awaiter||function(t,r,e,c){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function l(h){try{n(c.next(h))}catch(O){u(O)}}function f(h){try{n(c.throw(h))}catch(O){u(O)}}function n(h){h.done?o(h.value):i(h.value).then(l,f)}n((c=c.apply(t,r||[])).next())})},K=globalThis&&globalThis.__generator||function(t,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},c,i,o,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(n){return function(h){return f([n,h])}}function f(n){if(c)throw new TypeError("Generator is already executing.");for(;e;)try{if(c=1,i&&(o=n[0]&2?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[n[0]&2,o.value]),n[0]){case 0:case 1:o=n;break;case 4:return e.label++,{value:n[1],done:!1};case 5:e.label++,i=n[1],n=[0];continue;case 7:n=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(n[0]===6||n[0]===2)){e=0;continue}if(n[0]===3&&(!o||n[1]>o[0]&&n[1]<o[3])){e.label=n[1];break}if(n[0]===6&&e.label<o[1]){e.label=o[1],o=n;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(n);break}o[2]&&e.ops.pop(),e.trys.pop();continue}n=r.call(t,e)}catch(h){n=[6,h],i=0}finally{c=o=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},Yt=function(){function t(r){tt(this,r)}return t.prototype.render=function(){return M("stencil-router",null,M("stencil-route-switch",{scrollTopOffset:0},Ot.map(function(r){return M("stencil-route",{url:r.url,component:r.component,exact:!0})})))},t}(),Et="stencil-route.inactive{display:none}",Pt=function(){function t(r){tt(this,r),this.group=null,this.match=null,this.componentProps={},this.exact=!1,this.scrollOnNextRender=!1,this.previousMatch=null}return t.prototype.computeMatch=function(r){var e=this.group!=null||this.el.parentElement!=null&&this.el.parentElement.tagName.toLowerCase()==="stencil-route-switch";if(!(!r||e))return this.previousMatch=this.match,this.match=pt(r.pathname,{path:this.url,exact:this.exact,strict:!0})},t.prototype.loadCompleted=function(){return Z(this,void 0,void 0,function(){var r;return K(this,function(e){return r={},this.history&&this.history.location.hash?r={scrollToId:this.history.location.hash.substr(1)}:this.scrollTopOffset&&(r={scrollTopOffset:this.scrollTopOffset}),typeof this.componentUpdated=="function"?this.componentUpdated(r):this.match&&!wt(this.match,this.previousMatch)&&this.routeViewsUpdated&&this.routeViewsUpdated(r),[2]})})},t.prototype.componentDidUpdate=function(){return Z(this,void 0,void 0,function(){return K(this,function(r){switch(r.label){case 0:return[4,this.loadCompleted()];case 1:return r.sent(),[2]}})})},t.prototype.componentDidLoad=function(){return Z(this,void 0,void 0,function(){return K(this,function(r){switch(r.label){case 0:return[4,this.loadCompleted()];case 1:return r.sent(),[2]}})})},t.prototype.render=function(){if(!this.match||!this.history)return null;var r=Object.assign({},this.componentProps,{history:this.history,match:this.match});if(this.routeRender)return this.routeRender(Object.assign({},r,{component:this.component}));if(this.component){var e=this.component;return M(e,Object.assign({},r))}},Object.defineProperty(t.prototype,"el",{get:function(){return it(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"watchers",{get:function(){return{location:["computeMatch"]}},enumerable:!1,configurable:!0}),t}();st.injectProps(Pt,["location","history","historyType","routeViewsUpdated"]);Pt.style=Et;var Ut=function(){return((Math.random()*1e17).toString().match(/.{4}/g)||[]).join("-")},Ct=function(t,r,e){return pt(t,{path:r,exact:e,strict:!0})},It=function(t){return t.tagName==="STENCIL-ROUTE"},Rt=function(){function t(r){tt(this,r),this.group=Ut(),this.subscribers=[],this.queue=ot(this,"queue")}return t.prototype.componentWillLoad=function(){this.location!=null&&this.regenerateSubscribers(this.location)},t.prototype.regenerateSubscribers=function(r){return Z(this,void 0,void 0,function(){var e,c,i=this;return K(this,function(o){return r==null?[2]:(e=-1,this.subscribers=Array.prototype.slice.call(this.el.children).filter(It).map(function(u,l){var f=Ct(r.pathname,u.url,u.exact);return f&&e===-1&&(e=l),{el:u,match:f}}),e===-1?[2]:this.activeIndex===e?(this.subscribers[e].el.match=this.subscribers[e].match,[2]):(this.activeIndex=e,c=this.subscribers[this.activeIndex],this.scrollTopOffset&&(c.el.scrollTopOffset=this.scrollTopOffset),c.el.group=this.group,c.el.match=c.match,c.el.componentUpdated=function(u){i.queue.write(function(){i.subscribers.forEach(function(l,f){if(l.el.componentUpdated=void 0,f===i.activeIndex)return l.el.style.display="";i.scrollTopOffset&&(l.el.scrollTopOffset=i.scrollTopOffset),l.el.group=i.group,l.el.match=null,l.el.style.display="none"})}),i.routeViewsUpdated&&i.routeViewsUpdated(Object.assign({scrollTopOffset:i.scrollTopOffset},u))},[2]))})})},t.prototype.render=function(){return M("slot",null)},Object.defineProperty(t.prototype,"el",{get:function(){return it(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"watchers",{get:function(){return{location:["regenerateSubscribers"]}},enumerable:!1,configurable:!0}),t}();st.injectProps(Rt,["location","routeViewsUpdated"]);var L=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];t||console.warn.apply(console,r)},Tt=function(){var t,r=[],e=function(u){return L(t==null,"A history supports only one prompt at a time"),t=u,function(){t===u&&(t=null)}},c=function(u,l,f,n){if(t!=null){var h=typeof t=="function"?t(u,l):t;typeof h=="string"?typeof f=="function"?f(h,n):(L(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),n(!0)):n(h!==!1)}else n(!0)},i=function(u){var l=!0,f=function(){for(var n=[],h=0;h<arguments.length;h++)n[h]=arguments[h];l&&u.apply(void 0,n)};return r.push(f),function(){l=!1,r=r.filter(function(n){return n!==f})}},o=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];r.forEach(function(f){return f.apply(void 0,u)})};return{setPrompt:e,confirmTransitionTo:c,appendListener:i,notifyListeners:o}},jt=function(t,r){r===void 0&&(r="scrollPositions");var e=new Map,c=function(f,n){if(e.set(f,n),ut(t,"sessionStorage")){var h=[];e.forEach(function(O,k){h.push([k,O])}),t.sessionStorage.setItem("scrollPositions",JSON.stringify(h))}},i=function(f){return e.get(f)},o=function(f){return e.has(f)},u=function(f){c(f,[t.scrollX,t.scrollY])};if(ut(t,"sessionStorage")){var l=t.sessionStorage.getItem(r);e=l?new Map(JSON.parse(l)):e}return"scrollRestoration"in t.history&&(history.scrollRestoration="manual"),{set:c,get:i,has:o,capture:u}},ht="popstate",ft="hashchange",At=function(t,r){r===void 0&&(r={});var e=!1,c=t.history,i=t.location,o=t.navigator,u=Lt(t),l=!kt(o),f=jt(t),n=r.forceRefresh!=null?r.forceRefresh:!1,h=r.getUserConfirmation!=null?r.getUserConfirmation:gt,O=r.keyLength!=null?r.keyLength:6,k=r.basename?yt(W(r.basename)):"",J=function(){try{return t.history.state||{}}catch{return{}}},w=function(s){s=s||{};var m=s.key,b=s.state,d=i.pathname,H=i.search,p=i.hash,a=d+H+p;return L(!k||mt(a,k),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+a+'" to begin with "'+k+'".'),k&&(a=bt(a,k)),V(a,b,m||q(O))},E=Tt(),x=function(s){f.capture(y.location.key),Object.assign(y,s),y.location.scrollPosition=f.get(y.location.key),y.length=c.length,E.notifyListeners(y.location,y.action)},X=function(s){Ht(o,s)||$(w(s.state))},I=function(){$(w(J()))},$=function(s){if(e)e=!1,x();else{var m="POP";E.confirmTransitionTo(s,m,h,function(b){b?x({action:m,location:s}):N(s)})}},N=function(s){var m=y.location,b=T.indexOf(m.key),d=T.indexOf(s.key);b===-1&&(b=0),d===-1&&(d=0);var H=b-d;H&&(e=!0,j(H))},D=w(J()),T=[D.key],U=0,R=!1,Y=function(s){return k+S(s)},et=function(s,m){L(!(typeof s=="object"&&s.state!==void 0&&m!==void 0),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var b="PUSH",d=V(s,m,q(O),y.location);E.confirmTransitionTo(d,b,h,function(H){if(H){var p=Y(d),a=d.key,v=d.state;if(u)if(c.pushState({key:a,state:v},"",p),n)i.href=p;else{var g=T.indexOf(y.location.key),P=T.slice(0,g===-1?0:g+1);P.push(d.key),T=P,x({action:b,location:d})}else L(v===void 0,"Browser history cannot push state in browsers that do not support HTML5 history"),i.href=p}})},z=function(s,m){L(!(typeof s=="object"&&s.state!==void 0&&m!==void 0),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var b="REPLACE",d=V(s,m,q(O),y.location);E.confirmTransitionTo(d,b,h,function(H){if(H){var p=Y(d),a=d.key,v=d.state;if(u)if(c.replaceState({key:a,state:v},"",p),n)i.replace(p);else{var g=T.indexOf(y.location.key);g!==-1&&(T[g]=d.key),x({action:b,location:d})}else L(v===void 0,"Browser history cannot replace state in browsers that do not support HTML5 history"),i.replace(p)}})},j=function(s){c.go(s)},Q=function(){return j(-1)},C=function(){return j(1)},_=function(s){U+=s,U===1?(t.addEventListener(ht,X),l&&t.addEventListener(ft,I)):U===0&&(t.removeEventListener(ht,X),l&&t.removeEventListener(ft,I))},rt=function(s){s===void 0&&(s="");var m=E.setPrompt(s);return R||(_(1),R=!0),function(){return R&&(R=!1,_(-1)),m()}},nt=function(s){var m=E.appendListener(s);return _(1),function(){_(-1),m()}},y={length:c.length,action:"POP",location:D,createHref:Y,push:et,replace:z,go:j,goBack:Q,goForward:C,block:rt,listen:nt,win:t};return y},vt="hashchange",Mt={hashbang:{encodePath:function(t){return t.charAt(0)==="!"?t:"!/"+lt(t)},decodePath:function(t){return t.charAt(0)==="!"?t.substr(1):t}},noslash:{encodePath:lt,decodePath:W},slash:{encodePath:W,decodePath:W}},_t=function(t,r){r===void 0&&(r={});var e=!1,c=null,i=0,o=!1,u=t.location,l=t.history,f=xt(t.navigator),n=r.keyLength!=null?r.keyLength:6,h=r.getUserConfirmation,O=h===void 0?gt:h,k=r.hashType,J=k===void 0?"slash":k,w=r.basename?yt(W(r.basename)):"",E=Mt[J],x=E.encodePath,X=E.decodePath,I=function(){var a=u.href,v=a.indexOf("#");return v===-1?"":a.substring(v+1)},$=function(a){return u.hash=a},N=function(a){var v=u.href.indexOf("#");u.replace(u.href.slice(0,v>=0?v:0)+"#"+a)},D=function(){var a=X(I());return L(!w||mt(a,w),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+a+'" to begin with "'+w+'".'),w&&(a=bt(a,w)),V(a,void 0,q(n))},T=Tt(),U=function(a){Object.assign(p,a),p.length=l.length,T.notifyListeners(p.location,p.action)},R=function(){var a=I(),v=x(a);if(a!==v)N(v);else{var g=D(),P=p.location;if(!e&&St(P,g)||c===S(g))return;c=null,Y(g)}},Y=function(a){if(e)e=!1,U();else{var v="POP";T.confirmTransitionTo(a,v,O,function(g){g?U({action:v,location:a}):et(a)})}},et=function(a){var v=p.location,g=C.lastIndexOf(S(v)),P=C.lastIndexOf(S(a));g===-1&&(g=0),P===-1&&(P=0);var B=g-P;B&&(e=!0,y(B))},z=I(),j=x(z);z!==j&&N(j);var Q=D(),C=[S(Q)],_=function(a){return"#"+x(w+S(a))},rt=function(a,v){L(v===void 0,"Hash history cannot push state; it is ignored");var g="PUSH",P=V(a,void 0,q(n),p.location);T.confirmTransitionTo(P,g,O,function(B){if(B){var A=S(P),F=x(w+A),at=I()!==F;if(at){c=A,$(F);var G=C.lastIndexOf(S(p.location)),ct=C.slice(0,G===-1?0:G+1);ct.push(A),C=ct,U({action:g,location:P})}else L(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),U()}})},nt=function(a,v){L(v===void 0,"Hash history cannot replace state; it is ignored");var g="REPLACE",P=V(a,void 0,q(n),p.location);T.confirmTransitionTo(P,g,O,function(B){if(B){var A=S(P),F=x(w+A),at=I()!==F;at&&(c=A,N(F));var G=C.indexOf(S(p.location));G!==-1&&(C[G]=A),U({action:g,location:P})}})},y=function(a){L(f,"Hash history go(n) causes a full page reload in this browser"),l.go(a)},s=function(){return y(-1)},m=function(){return y(1)},b=function(a,v){i+=v,i===1?a.addEventListener(vt,R):i===0&&a.removeEventListener(vt,R)},d=function(a){a===void 0&&(a="");var v=T.setPrompt(a);return o||(b(t,1),o=!0),function(){return o&&(o=!1,b(t,-1)),v()}},H=function(a){var v=T.appendListener(a);return b(t,1),function(){b(t,-1),v()}},p={length:l.length,action:"POP",location:Q,createHref:_,push:rt,replace:nt,go:y,goBack:s,goForward:m,block:d,listen:H,win:t};return p},dt=function(t,r){var e=t.pathname.indexOf(r)==0?"/"+t.pathname.slice(r.length):t.pathname;return Object.assign({},t,{pathname:e})},Bt={browser:At,hash:_t},Ft=function(){function t(r){var e=this;tt(this,r),this.root="/",this.historyType="browser",this.titleSuffix="",this.routeViewsUpdated=function(c){if(c===void 0&&(c={}),e.history&&c.scrollToId&&e.historyType==="browser"){var i=e.history.win.document.getElementById(c.scrollToId);if(i)return i.scrollIntoView()}e.scrollTo(c.scrollTopOffset||e.scrollTopOffset)},this.isServer=ot(this,"isServer"),this.queue=ot(this,"queue")}return t.prototype.componentWillLoad=function(){var r=this;this.history=Bt[this.historyType](this.el.ownerDocument.defaultView),this.history.listen(function(e){e=dt(e,r.root),r.location=e}),this.location=dt(this.history.location,this.root)},t.prototype.scrollTo=function(r){var e=this.history;if(!(r==null||this.isServer||!e))return e.action==="POP"&&Array.isArray(e.location.scrollPosition)?this.queue.write(function(){e&&e.location&&Array.isArray(e.location.scrollPosition)&&e.win.scrollTo(e.location.scrollPosition[0],e.location.scrollPosition[1])}):this.queue.write(function(){e.win.scrollTo(0,r)})},t.prototype.render=function(){if(!(!this.location||!this.history)){var r={historyType:this.historyType,location:this.location,titleSuffix:this.titleSuffix,root:this.root,history:this.history,routeViewsUpdated:this.routeViewsUpdated};return M(st.Provider,{state:r},M("slot",null))}},Object.defineProperty(t.prototype,"el",{get:function(){return it(this)},enumerable:!1,configurable:!0}),t}();export{Yt as iot_app_kit_vis_app,Pt as stencil_route,Rt as stencil_route_switch,Ft as stencil_router};
