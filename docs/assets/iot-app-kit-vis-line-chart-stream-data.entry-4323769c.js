import{h as i,r as f}from"./index-d9c51ec4.js";import{D as y}from"./dataConstants-8e079f60-a2a46658.js";import{S}from"./time-051aeed0-3f16b7f0.js";var T=globalThis&&globalThis.__spreadArrays||function(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var p=Array(r),d=0,t=0;t<e;t++)for(var v=arguments[t],a=0,_=v.length;a<_;a++,d++)p[d]=v[a];return p},m=0,l=5e3,g=new Date(1998,0,0),o=new Date(2e3,0,1),h={x:(g.getTime()+o.getTime())/2,y:(m+l)/2},s=new URLSearchParams(window.location.search),c=s.get("dataPerRound"),w=s.get("roundFrequency"),u=s.get("viewportSpeed"),P=c?Number.parseInt(c,10):1,A=w?Number.parseInt(w,10):S,n=u?Number.parseInt(u,10):0,D=function(r){return new Array(P).fill(0).map(function(t,e){return{x:r.x,y:r.y+e}})},N=function(){function r(t){var e=this;f(this,t),this.dataPoints=[h],this.viewport={start:g,end:o,yMin:m,yMax:l},this.viewportLoop=function(){return window.requestAnimationFrame(function(){e.viewport=Object.assign(Object.assign({},e.viewport),{start:new Date(e.viewport.start.getTime()+n),end:new Date(e.viewport.end.getTime()+n)}),e.viewportShifter=e.viewportLoop()})}}return r.prototype.componentWillLoad=function(){var t=this;n>0&&(this.viewportShifter=this.viewportLoop()),this.dataLoop=window.setInterval(function(){t.dataPoints=T(t.dataPoints,D({x:(t.dataPoints[t.dataPoints.length-1].x+o.getTime())/2,y:h.y}))},A)},r.prototype.disconnectedCallback=function(){clearInterval(this.dataLoop),this.viewportShifter!=null&&window.cancelAnimationFrame(this.viewportShifter)},r.prototype.render=function(){return i("div",{id:"chart-container",style:{border:"1px solid lightgray",height:"500px",width:"500px"}},i("iot-app-kit-vis-line-chart",{widgetId:"widget-id",dataStreams:[{id:"test",color:"black",name:"test stream",data:this.dataPoints,resolution:0,dataType:y.NUMBER}],size:{height:500,width:500},viewport:this.viewport,setViewport:function(){}}),i("iot-app-kit-vis-webgl-context",null))},r}();export{N as iot_app_kit_vis_line_chart_stream_data};
